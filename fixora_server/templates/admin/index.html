{% extends "admin/index.html" %}
{% block content %}

<h2 style="margin-bottom:20px;">Fixora Business Overview</h2>

<div class="stats-grid">

    <div class="stat-card">
        <h3>{{ total_customers }}</h3>
        <p>Customers</p>
    </div>

    <div class="stat-card">
        <h3>{{ total_providers }}</h3>
        <p>Providers</p>
    </div>

    <div class="stat-card">
        <h3>{{ total_requests }}</h3>
        <p>Total Requests</p>
    </div>

    <div class="stat-card warning">
        <h3>{{ pending_requests }}</h3>
        <p>Pending</p>
    </div>

    <div class="stat-card success">
        <h3>{{ completed_requests }}</h3>
        <p>Completed</p>
    </div>

    <div class="stat-card danger">
        <h3>{{ cancelled_requests }}</h3>
        <p>Cancelled</p>
    </div>

    <div class="stat-card revenue">
        <h3>â‚¹ {{ net_revenue }}</h3>
        <p>Net Revenue</p>
    </div>

    <div class="stat-card">
        <h3>{{ completion_rate }}%</h3>
        <p>Completion Rate</p>
    </div>

    <div class="stat-card">
        <h3>{{ cancel_rate }}%</h3>
        <p>Cancel Rate</p>
    </div>

</div>

<hr style="margin:40px 0;">

<h2>Recent Service Requests</h2>

<table class="recent-table">
    <tr>
        <th>Customer</th>
        <th>Provider</th>
        <th>Status</th>
        <th>Date</th>
    </tr>
    {% for req in recent_requests %}
    <tr>
        <td>{{ req.customer.user.username }}</td>
        <td>{{ req.provider_service.provider.user.username }}</td>
        <td>{{ req.status }}</td>
        <td>{{ req.request_date }}</td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="4">No recent requests</td>
    </tr>
    {% endfor %}
</table>

{{ block.super }}

<style>
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }

    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
        text-align: center;
    }

    .stat-card h3 {
        margin: 0;
        font-size: 28px;
    }

    .stat-card p {
        margin-top: 8px;
        color: gray;
    }

    .warning {
        border-left: 6px solid orange;
    }

    .success {
        border-left: 6px solid green;
    }

    .danger {
        border-left: 6px solid red;
    }

    .revenue {
        border-left: 6px solid #4CAF50;
    }

    .recent-table {
        width: 100%;
        border-collapse: collapse;
    }

    .recent-table th,
    .recent-table td {
        padding: 10px;
        border-bottom: 1px solid #eee;
        text-align: left;
    }

    .recent-table th {
        background: #f9f9f9;
    }
</style>

{% endblock %}