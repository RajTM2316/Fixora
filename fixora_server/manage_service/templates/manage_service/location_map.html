<!DOCTYPE html>
<html>

<head>
    <title>My Live Location</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #map {
            height: 500px;
            width: 90%;
            margin: 20px auto;
            border-radius: 10px;
        }
    </style>
</head>

<body>

    <h2>My Live Location</h2>

    <div id="map"></div>

    <script>
        var lat = "{{ latitude|default:'' }}";
        var lng = "{{ longitude|default:'' }}";

        if (lat && lng) {

            lat = parseFloat(lat);
            lng = parseFloat(lng);

            var map = L.map('map').setView([lat, lng], 15);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);

            L.marker([lat, lng]).addTo(map)
                .bindPopup("You are here üìç")
                .openPopup();

        } else {
            document.getElementById("map").innerHTML =
                "<h3>Location not available. Please share location first.</h3>";
        }
    </script>


</body>

</html>